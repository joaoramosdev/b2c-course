<?xml version="1.0" encoding="UTF-8"?>
<?demandware-pipeline version="2.0"?>

<pipeline type="view">
    <branch basename="_ANONYMOUS_BRANCH_1">
        <segment>
            <node>
                <text-node>
                    <description>We receive the "brand" param via the Job Schedule</description>
                </text-node>
                <node-display x="1" y="1" />
            </node>
        </segment>
    </branch>
    <branch basename="Start">
        <segment>
            <node>
                <start-node call-mode="private" name="Start" secure="false">
                    <start-parameter value="brand" />
                </start-node>
                <node-display x="2" y="1" />
            </node>
            <simple-transition>
                <transition-display>
                    <bend-point relative-to="source" x="0" y="1" />
                </transition-display>
            </simple-transition>
            <node>
                <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
                    <config-property key="Transactional" value="false" />
                    <config-property key="OnError" value="PIPELET_ERROR" />
                    <config-property key="ScriptFile" value="CreateXML.ds" />
                    <key-binding alias="null" key="ScriptLog" />
                    <key-binding alias="brand" key="brand" />
                    <key-binding alias="filepath" key="filepath" />
                </pipelet-node>
                <node-display x="0" y="1" />
                <branch basename="b2" source-connector="error">
                    <transition target-connector="in">
                        <transition-display>
                            <bend-point relative-to="source" x="1" y="0" />
                        </transition-display>
                    </transition>
                    <segment>
                        <node>
                            <stop-node name="ERROR" />
                            <node-display orientation="horizontal" x="1" y="0" />
                        </node>
                    </segment>
                </branch>
            </node>
            <simple-transition>
                <transition-display>
                    <bend-point relative-to="source" x="0" y="1" />
                </transition-display>
            </simple-transition>
            <node>
                <pipelet-node pipelet-name="ImportCatalog" pipelet-set-identifier="bc_api">
                    <key-binding alias="" MERGE"" key="ImportMode" />
                    <key-binding alias="null" key="ErrorCode" />
                    <key-binding alias="null" key="ErrorMsg" />
                    <key-binding alias="null" key="LogFileName" />
                    <key-binding alias="null" key="Status" />
                    <key-binding alias="null" key="ImportConfiguration" />
                    <key-binding alias="filepath" key="ImportFile" />
                </pipelet-node>
                <node-display x="0" y="1" />
                <branch basename="b3" source-connector="error">
                    <transition target-connector="in">
                        <transition-display>
                            <bend-point relative-to="source" x="1" y="0" />
                        </transition-display>
                    </transition>
                    <segment>
                        <node>
                            <stop-node name="ERROR" />
                            <node-display orientation="horizontal" x="1" y="0" />
                        </node>
                    </segment>
                </branch>
            </node>
            <simple-transition>
                <transition-display>
                    <bend-point relative-to="source" x="0" y="1" />
                </transition-display>
            </simple-transition>
            <node>
                <end-node name="OK" />
                <node-display x="0" y="1" />
            </node>
        </segment>
    </branch>
    <branch basename="_ANONYMOUS_BRANCH_3">
        <segment>
            <node>
                <text-node>
                    <description>CreateXML.ds creates the XML which contains the new category assignments</description>
                </text-node>
                <node-display width="2" x="0" y="2" />
            </node>
        </segment>
    </branch>
</pipeline>