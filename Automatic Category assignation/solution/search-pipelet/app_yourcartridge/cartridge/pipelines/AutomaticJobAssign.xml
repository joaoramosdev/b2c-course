<?xml version="1.0" encoding="UTF-8"?>
<?demandware-pipeline version="2.0"?>

<pipeline type="view">
    <branch basename="Start">
        <segment>
            <node>
                <start-node call-mode="private" name="Start" secure="false" />
                <node-display x="2" y="0" />
            </node>
            <simple-transition>
                <transition-display>
                    <bend-point relative-to="source" x="0" y="1" />
                </transition-display>
            </simple-transition>
            <node>
                <pipelet-node pipelet-name="Search" pipelet-set-identifier="bc_api">
                    <config-property key="SearchProduct" value="true" />
                    <config-property key="SearchContent" value="true" />
                    <config-property key="DisallowOfflineCategory" value="true" />
                    <config-property key="RecursiveCategorySearch" value="true" />
                    <config-property key="RecursiveFolderSearch" value="false" />
                    <key-binding alias="null" key="SearchPhrase" />
                    <key-binding alias="ProductSearchModel" key="ProductSearchModel" />
                    <key-binding alias="null" key="SortBy1" />
                    <key-binding alias="null" key="SortBy3" />
                    <key-binding alias="null" key="SortBy2" />
                    <key-binding alias="null" key="SortBy1Direction" />
                    <key-binding alias="null" key="SortBy2Direction" />
                    <key-binding alias="null" key="SortBy3Direction" />
                    <key-binding alias="null" key="PriceMax" />
                    <key-binding alias="null" key="PriceMin" />
                    <key-binding alias="null" key="RefineBy1Min" />
                    <key-binding alias="null" key="RefineBy1Max" />
                    <key-binding alias="null" key="RefineBy2Name" />
                    <key-binding alias="null" key="RefineBy2Phrase" />
                    <key-binding alias="null" key="RefineBy2Min" />
                    <key-binding alias="null" key="RefineBy2Max" />
                    <key-binding alias="null" key="RefineBy3Name" />
                    <key-binding alias="null" key="RefineBy3Phrase" />
                    <key-binding alias="null" key="RefineBy3Min" />
                    <key-binding alias="null" key="RefineBy3Max" />
                    <key-binding alias="null" key="RefineBy4Name" />
                    <key-binding alias="null" key="RefineBy4Phrase" />
                    <key-binding alias="null" key="RefineBy4Min" />
                    <key-binding alias="null" key="RefineBy4Max" />
                    <key-binding alias="null" key="RefineBy5Name" />
                    <key-binding alias="null" key="RefineBy5Phrase" />
                    <key-binding alias="null" key="RefineBy5Min" />
                    <key-binding alias="null" key="RefineBy5Max" />
                    <key-binding alias="null" key="ProductID" />
                    <key-binding alias="null" key="FolderID" />
                    <key-binding alias="null" key="ContentID" />
                    <key-binding alias="null" key="ContentSearchModel" />
                    <key-binding alias="null" key="RefineByNamePrefix" />
                    <key-binding alias="null" key="RefineByPhrasePrefix" />
                    <key-binding alias="null" key="RefineByMinPrefix" />
                    <key-binding alias="null" key="RefineByMaxPrefix" />
                    <key-binding alias="null" key="OrderableProductsOnly" />
                    <key-binding alias="null" key="SortingRuleID" />
                    <key-binding alias="null" key="PromotionID" />
                    <key-binding alias="null" key="PromotionProductType" />
                    <key-binding alias="null" key="TrackingEmptySearchesEnabled" />
                    <key-binding alias="" brand"" key="RefineBy1Name" />
                    <key-binding alias="" Sony"" key="RefineBy1Phrase" />
                </pipelet-node>
                <node-display x="0" y="1" />
            </node>
            <simple-transition>
                <transition-display>
                    <bend-point relative-to="source" x="0" y="1" />
                </transition-display>
            </simple-transition>
            <node>
                <pipelet-node pipelet-name="Script" pipelet-set-identifier="bc_api">
                    <config-property key="Transactional" value="false" />
                    <config-property key="OnError" value="PIPELET_ERROR" />
                    <config-property key="ScriptFile" value="AssignCategory.ds" />
                    <key-binding alias="null" key="ScriptLog" />
                    <key-binding alias="ProductSearchModel" key="ProductSearchModel" />
                    <key-binding alias="fileName" key="FileName" />
                </pipelet-node>
                <node-display x="0" y="1" />
                <branch basename="b2" source-connector="error">
                    <transition target-connector="in1" target-path="./b3.1">
                        <transition-display>
                            <bend-point relative-to="source" x="2" y="0" />
                        </transition-display>
                    </transition>
                </branch>
            </node>
            <simple-transition />
            <node>
                <pipelet-node pipelet-name="ImportCatalog" pipelet-set-identifier="bc_api">
                    <key-binding alias="" catalog catalog.xml"" key="ImportFile" />
                    <key-binding alias="" MERGE"" key="ImportMode" />
                    <key-binding alias="null" key="ErrorCode" />
                    <key-binding alias="null" key="ErrorMsg" />
                    <key-binding alias="null" key="LogFileName" />
                    <key-binding alias="null" key="Status" />
                    <key-binding alias="null" key="ImportConfiguration" />
                </pipelet-node>
                <node-display x="0" y="1" />
                <branch basename="b3" source-connector="error">
                    <transition target-connector="in1" />
                    <segment>
                        <node>
                            <join-node />
                            <node-display x="1" y="0" />
                        </node>
                        <simple-transition>
                            <transition-display>
                                <bend-point relative-to="source" x="0" y="1" />
                            </transition-display>
                        </simple-transition>
                        <node>
                            <stop-node name="ERROR" />
                            <node-display x="0" y="1" />
                        </node>
                    </segment>
                </branch>
            </node>
            <simple-transition />
            <node>
                <end-node name="OK" />
                <node-display x="0" y="1" />
            </node>
        </segment>
    </branch>
</pipeline>